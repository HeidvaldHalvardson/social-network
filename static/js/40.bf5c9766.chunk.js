"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[40],{3040:function(t,e,r){r.r(e),r.d(e,{default:function(){return I}});var s=r(8683),n=r(5671),a=r(3144),i=r(136),o=r(7277),u=r(2791),c=r(2398),l=r(885),d=r(184),p=function(t){var e=(0,u.useState)(!1),r=(0,l.Z)(e,2),s=r[0],n=r[1],a=(0,u.useState)(t.status),i=(0,l.Z)(a,2),o=i[0],c=i[1];(0,u.useEffect)((function(){c(t.status)}),[t.status]);return(0,d.jsx)(d.Fragment,{children:s?(0,d.jsx)("div",{children:(0,d.jsx)("input",{onChange:function(t){c(t.currentTarget.value)},autoFocus:!0,onBlur:function(){n(!1),t.updateStatus(o)},value:o})}):(0,d.jsx)("div",{children:(0,d.jsx)("span",{onClick:function(){n(!0)},children:t.status||"what's new?"})})})},h=r(3946),f=function(t){if(!t.profile)return(0,d.jsx)(c.Z,{});return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{children:[(0,d.jsx)("img",{src:null!==t.profile.photos.large?t.profile.photos.large:h,width:200,height:200,alt:""}),t.isOwner&&(0,d.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&t.savePhoto(e.target.files[0])}}),(0,d.jsx)(p,{status:t.status,updateStatus:t.updateStatus})]})})},m=r(6508),x=r(2982),j=function(t){var e=t.children;return(0,d.jsx)("li",{children:e})},v=r(5705),g=r(132),P=r(2539),w=g.Ry({newPost:g.Z_().required("Field is required").max(100,"Max length is 100 symbols")}),Z=function(t){return(0,d.jsx)(v.J9,{initialValues:{newPost:""},onSubmit:function(e,r){var s=r.setSubmitting,n=r.resetForm;t.addPost(e.newPost),n({values:""}),s(!1)},validateOnBlur:!1,validationSchema:w,children:function(t){var e=t.isSubmitting,r=t.errors,s=t.isValid;return(0,d.jsxs)(v.l0,{children:[(0,d.jsx)("div",{children:(0,d.jsx)(v.gN,{as:P.i,name:"newPost",placeholder:"Enter your post",errors:r})}),(0,d.jsx)("button",{type:"submit",disabled:e||!s,children:"Add post"})]})}})},S=u.memo((function(t){var e=(0,x.Z)(t.postData).reverse().map((function(t){return(0,d.jsx)(j,{children:t.message})}));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h3",{children:"My posts"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Z,{addPost:t.addPost}),(0,d.jsx)("ul",{children:e})]})]})})),y=r(8687),_=(0,y.$j)((function(t){return{postData:t.profilePage.postData,newPostText:t.profilePage.newPostText}}),(function(t){return{addPost:function(e){t((0,m.q2)(e))}}}))(S),k=function(t){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f,{isOwner:t.isOwner,profile:t.profile,status:t.status,updateStatus:t.updateStatus,savePhoto:t.savePhoto}),(0,d.jsx)(_,{})]})},F=r(7781),b=r(2611),C=function(t){(0,i.Z)(r,t);var e=(0,o.Z)(r);function r(){var t;(0,n.Z)(this,r);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).refreshProfile=function(){var e=t.props.match.params.userId;e||(e=t.props.authorisedUserId),t.props.getUserProfile(e),t.props.getStatus(e)},t}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,r){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(k,(0,s.Z)((0,s.Z)({isOwner:!this.props.match.params.userId},this.props),{},{profile:this.props.profile,status:this.props.status,savePhoto:this.props.savePhoto}))})}}]),r}(u.Component),I=(0,F.qC)((0,y.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorisedUserId:t.auth.userId,isAuth:t.auth.isAuth}}),{addPost:m.q2,getUserProfile:m.et,getStatus:m.lR,updateStatus:m.Nf,savePhoto:m.Ju}),b.E)(C)},2539:function(t,e,r){r.d(e,{t:function(){return h},i:function(){return p}});var s=r(8683),n=r(5987),a=(r(2791),"CustomTextarea_fieldControl__qQVHB"),i="CustomTextarea_fieldError__9NTyF",o="ErrorMessage_errors__mHYok",u=r(184),c=function(t){var e=t.children;return(0,u.jsx)("p",{className:o,children:e})},l=["errors"],d=["errors"],p=function(t){var e=t.errors,r=(0,n.Z)(t,l);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("textarea",(0,s.Z)({className:"".concat(a," ").concat(e[r.name]?i:"")},r)),(0,u.jsx)(c,{children:e[r.name]})]})},h=function(t){var e=t.errors,r=(0,n.Z)(t,d);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",(0,s.Z)({className:"".concat(a," ").concat(e[r.name]?i:"")},r)),(0,u.jsx)(c,{children:e[r.name]})]})}},3946:function(t,e,r){t.exports=r.p+"static/media/user.5031c56773989690b056.jpg"}}]);
//# sourceMappingURL=40.bf5c9766.chunk.js.map