"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[416],{7416:function(e,r,t){t.r(r),t.d(r,{default:function(){return O}});var s=t(8683),n=t(5671),i=t(3144),o=t(136),a=t(7277),l=t(2791),u=t(885),c=t(2398),d=t(184),h=function(e){var r=(0,l.useState)(!1),t=(0,u.Z)(r,2),s=t[0],n=t[1],i=(0,l.useState)(e.status),o=(0,u.Z)(i,2),a=o[0],c=o[1];(0,l.useEffect)((function(){c(e.status)}),[e.status]);return(0,d.jsx)(d.Fragment,{children:s?(0,d.jsx)("div",{children:(0,d.jsx)("input",{onChange:function(e){c(e.currentTarget.value)},autoFocus:!0,onBlur:function(){n(!1),e.updateStatus(a)},value:a})}):(0,d.jsx)("div",{children:(0,d.jsx)("span",{onClick:function(){n(!0)},children:e.status||"what's new?"})})})},f=t(3946),p="ProfileInfo_contact__TWnE1",x=t(5705),m=t(132),j=t(2539),b="ProfileDataForm_form__pu7hQ",g=m.Ry({fullName:m.Z_().required("Name is required"),lookingForAJobDescription:m.Z_().required("Field is required").max(100,"Exceeded maximum number of characters"),aboutMe:m.Z_().required("Field is required").max(100,"Exceeded maximum number of characters")}),v=function(e){return(0,d.jsx)(x.J9,{initialValues:e.profile,onSubmit:function(r,t){var s=t.setSubmitting,n=t.setStatus;e.onSubmit(r,n),s(!1)},validationSchema:g,children:function(r){var t=r.errors,s=r.isSubmitting,n=r.isValid,i=r.status;return(0,d.jsxs)(x.l0,{className:b,children:[(0,d.jsxs)("label",{children:[(0,d.jsx)("b",{children:"Name:"}),(0,d.jsx)(x.gN,{as:j.t,type:"text",name:"fullName",placeholder:"Name",errors:t})]}),(0,d.jsxs)("label",{children:[(0,d.jsx)("b",{children:"Looking for a job:"}),(0,d.jsx)(x.gN,{type:"checkbox",name:"lookingForAJob"})]}),(0,d.jsxs)("label",{children:[(0,d.jsx)("b",{children:"My professional skills:"}),(0,d.jsx)(x.gN,{as:j.i,name:"lookingForAJobDescription",placeholder:"My professional skills",errors:t})]}),(0,d.jsxs)("label",{children:[(0,d.jsx)("b",{children:"About me:"}),(0,d.jsx)(x.gN,{as:j.i,name:"aboutMe",placeholder:"About me",errors:t})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Contacts:"}),(0,d.jsx)("ul",{children:Object.keys(e.profile.contacts).map((function(e){return(0,d.jsx)("li",{children:(0,d.jsxs)("label",{children:[(0,d.jsxs)("b",{children:[e,":"]}),(0,d.jsx)(x.gN,{as:j.t,type:"text",name:"contacts."+e,placeholder:e,errors:t})]})},e)}))})]}),i,(0,d.jsx)("button",{type:"submit",disabled:s||!n,children:"Save changes"})]})}})},P=function(e){return(0,d.jsxs)(d.Fragment,{children:[e.isOwner&&(0,d.jsx)("button",{onClick:e.goToEditMode,children:"Edit"}),(0,d.jsxs)("p",{children:[(0,d.jsx)("b",{children:"Name:"})," ",e.profile.fullName]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("b",{children:"Looking for a job:"})," ",e.profile.lookingForAJob?"yes":"no"]}),e.profile.lookingForAJob&&(0,d.jsxs)("p",{children:[(0,d.jsx)("b",{children:"My professional skills:"})," ",e.profile.lookingForAJobDescription]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("b",{children:"About me:"})," ",e.profile.aboutMe]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Contacts:"}),(0,d.jsx)("ul",{children:Object.keys(e.profile.contacts).map((function(r){return(0,d.jsx)(k,{contactTitle:r,contactValue:e.profile.contacts[r]},r)}))})]})]})},k=function(e){if(e.contactValue)return(0,d.jsxs)("li",{className:p,children:[(0,d.jsxs)("b",{children:[e.contactTitle,":"]})," ",e.contactValue]})},y=function(e){var r=(0,l.useState)(!1),t=(0,u.Z)(r,2),s=t[0],n=t[1];if(!e.profile)return(0,d.jsx)(c.Z,{});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("img",{src:null!==e.profile.photos.large?e.profile.photos.large:f,width:200,height:200,alt:""}),e.isOwner&&(0,d.jsx)("input",{type:"file",onChange:function(r){r.target.files.length&&e.savePhoto(r.target.files[0])}}),(0,d.jsx)(h,{status:e.status,updateStatus:e.updateStatus}),s?(0,d.jsx)(v,{profile:e.profile,onSubmit:function(r,t){e.saveProfile(r,t).then((function(){n(!1)}))}}):(0,d.jsx)(P,{profile:e.profile,isOwner:e.isOwner,goToEditMode:function(){n(!0)}})]})},S=t(6508),w=t(2982),F=function(e){var r=e.children;return(0,d.jsx)("li",{children:r})},_=m.Ry({newPost:m.Z_().required("Field is required").max(100,"Max length is 100 symbols")}),N=function(e){return(0,d.jsx)(x.J9,{initialValues:{newPost:""},onSubmit:function(r,t){var s=t.setSubmitting,n=t.resetForm;e.addPost(r.newPost),n({values:""}),s(!1)},validateOnBlur:!1,validationSchema:_,children:function(e){var r=e.isSubmitting,t=e.errors,s=e.isValid;return(0,d.jsxs)(x.l0,{children:[(0,d.jsx)("div",{children:(0,d.jsx)(x.gN,{as:j.i,name:"newPost",placeholder:"Enter your post",errors:t})}),(0,d.jsx)("button",{type:"submit",disabled:r||!s,children:"Add post"})]})}})},Z=l.memo((function(e){var r=(0,w.Z)(e.postData).reverse().map((function(e){return(0,d.jsx)(F,{children:e.message},e.id)}));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h3",{children:"My posts"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(N,{addPost:e.addPost}),(0,d.jsx)("ul",{children:r})]})]})})),A=t(8687),C=(0,A.$j)((function(e){return{postData:e.profilePage.postData,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(r){e((0,S.q2)(r))}}}))(Z),q=function(e){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(y,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,d.jsx)(C,{})]})},M=t(7781),E=t(2611),T=function(e){(0,o.Z)(t,e);var r=(0,a.Z)(t);function t(){var e;(0,n.Z)(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).refreshProfile=function(){var r=e.props.match.params.userId;r||(r=e.props.authorisedUserId),e.props.getUserProfile(r),e.props.getStatus(r)},e}return(0,i.Z)(t,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,r,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(q,(0,s.Z)((0,s.Z)({isOwner:!this.props.match.params.userId},this.props),{},{profile:this.props.profile,status:this.props.status,savePhoto:this.props.savePhoto}))})}}]),t}(l.Component),O=(0,M.qC)((0,A.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorisedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{addPost:S.q2,getUserProfile:S.et,getStatus:S.lR,updateStatus:S.Nf,savePhoto:S.Ju,saveProfile:S.Ii}),E.E)(T)},2539:function(e,r,t){t.d(r,{t:function(){return f},i:function(){return h}});var s=t(8683),n=t(5987),i=(t(2791),"CustomTextarea_fieldControl__qQVHB"),o="CustomTextarea_fieldError__9NTyF",a="ErrorMessage_errors__mHYok",l=t(184),u=function(e){var r=e.children;return(0,l.jsx)("p",{className:a,children:r})},c=["errors"],d=["errors"],h=function(e){var r=e.errors,t=(0,n.Z)(e,c);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("textarea",(0,s.Z)({className:"".concat(i," ").concat(r[t.name]?o:"")},t)),(0,l.jsx)(u,{children:r[t.name]})]})},f=function(e){var r=e.errors,t=(0,n.Z)(e,d);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",(0,s.Z)({className:"".concat(i," ").concat(r[t.name]?o:"")},t)),(0,l.jsx)(u,{children:r[t.name]})]})}},3946:function(e,r,t){e.exports=t.p+"static/media/user.5031c56773989690b056.jpg"}}]);
//# sourceMappingURL=416.31175e5f.chunk.js.map